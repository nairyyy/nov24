<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Animations Gallery</title>
<style>
  body {
    margin: 0;
    padding: 20px;
    background: black;
    font-family: Arial, sans-serif;
    color: white;
  }
  .gallery {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
  }
  .box {
    background: #111;
    padding: 10px;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  canvas {
    width: 100%;
    height: auto;
    background: #000;
    border-radius: 10px;
    object-fit: contain;
  }
  @media (max-width: 1000px) {
    .gallery { grid-template-columns: repeat(3, 1fr); }
  }
  @media (max-width: 700px) {
    .gallery { grid-template-columns: repeat(2, 1fr); }
  }
  @media (max-width: 450px) {
    .gallery { grid-template-columns: repeat(1, 1fr); }
  }
</style>
</head>
<body>

<div class="gallery" id="gallery"></div>
<script>
const gallery = document.getElementById("gallery");

/* --------------------------------------------------
   1) FIXED ANIMATIONS (uploaded manually, now only 1 image each)
   -------------------------------------------------- */
const fixedAnimations = [
  ["pic1.jpg"],
  ["pic2.jpg"],
  ["pic3.jpg"],
  ["pic4.jpg"],
  ["pic5.jpg"],
  // index 5 = slot for user animation
  ["pic6.jpg"],
  ["pic7.jpg"],
  
];

/* --------------------------------------------------
   2) USER animation (from j.html)
   -------------------------------------------------- */
let userAnimations = JSON.parse(localStorage.getItem("animations")) || [];
let userAnimation = userAnimations.length ? userAnimations[userAnimations.length - 1] : null;

/* --------------------------------------------------
   3) Create final animation list
   -------------------------------------------------- */
let allAnimations = [];

// first 5 fixed (single-image JPG)
allAnimations.push(...fixedAnimations.slice(0, 5));

// 6th = user animation (multi-frame)
if (userAnimation) allAnimations.push(userAnimation);
else allAnimations.push(null);

// remaining fixed (single-image JPG)
allAnimations.push(...fixedAnimations.slice(5));

/* --------------------------------------------------
   4) Canvas player for each animation
   -------------------------------------------------- */
function createAnimationCanvas(frames) {
  if (!frames || !frames.length) return;
  const box = document.createElement("div");
  box.className = "box";
  const canvas = document.createElement("canvas");
  canvas.width = 300;
  canvas.height = 400;
  box.appendChild(canvas);
  gallery.appendChild(box);
  const ctx = canvas.getContext("2d");

  // For single-image animations, just show the image; for multi-frame, animate
  if (frames.length === 1) {
    const img = new Image();
    img.src = frames[0];
    img.onload = () => {
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    };
  } else {
    const imgs = frames.map(src => {
      let img = new Image();
      img.src = src;
      return img;
    });
    let index = 0;
    function drawFrame() {
      let img = imgs[index];
      if (img.complete) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      }
      index = (index + 1) % imgs.length;
    }
    setInterval(drawFrame, 120);
  }
}

/* --------------------------------------------------
   5) Render all animations
   -------------------------------------------------- */
allAnimations.forEach(frames => createAnimationCanvas(frames));

/* --------------------------------------------------
   6) Optional: auto-scroll up and down smoothly
   -------------------------------------------------- */
let direction = 1;
const scrollStep = 1;
const intervalTime = 20;
function autoScroll() {
  const maxScroll = document.body.scrollHeight - window.innerHeight;
  let scrollTop = window.scrollY || window.pageYOffset;
  scrollTop += scrollStep * direction;
  if (scrollTop >= maxScroll) direction = -1;
  if (scrollTop <= 0) direction = 1;
  window.scrollTo(0, scrollTop);
}
setInterval(autoScroll, intervalTime);
</script>

</body>
</html>
